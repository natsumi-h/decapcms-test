---
import { Image } from "astro:assets";
import headerlogo from "../assets/images/headerlogo.png";

const pathname = Astro.url.pathname;

const menu = [
  {
    name: "Home",
    link: "/",
  },
  {
    name: "About Us",
    link: "/about",
  },
  {
    name: "Our Services",
    link: "/services",
  },
  {
    name: "DSS",
    link: "/dss",
  },
  {
    name: "Food Waste 101",
    link: "/education",
  },
  {
    name: "Blog & Media",
    link: "/blog",
  },
  {
    name: "Contact Us",
    link: "/contact",
  },
];
---

<div class="text-white bg-orange text-[1rem] font-bold py-[1.5rem] belt">
  <span>
    ♥ Transform Waste, Transform Lives ♥ START YOUR FREE TRIAL TODAY ♥
    Transform Waste, Transform Lives ♥ START YOUR FREE TRIAL TODAY ♥
  </span>
</div>
<!-- Header -->
<div
  id="header"
  class="py-[1.25rem] px-[1rem] fixed bg-white z-50 drop-shadow-md rounded-[1.25rem] w-[97.2%] max-w-full top-[4.5rem] left-2/4 translate-x-[-50%]"
>
  <div
    class="flex items-center justify-between max-w-[85.375rem] mx-auto w-full"
  >
    <!-- Logo -->
    <div class="shrink-0">
      <a href="/">
        <Image src={headerlogo} alt="D2L Singapore" width="78" height="110" />
      </a>
    </div>
    <div class="shrink w-[90.48%]">
      <!-- Top Buttons -->
      <div class="text-right">
        <nav
          class="bg-beige inline-block rounded-full py-[0.1875rem] px-[0.25rem] drop-shadow-md"
        >
          <ul class="flex itens-center gap-x-[0.5rem] bold text-[0.75rem]">
            <li>
              <a
                href="/"
                class="inline-block text-white bg-orange px-[1rem] py-[0.5rem] rounded-full font-bold border-[0.1875rem] border-orange"
              >
                For Businesses
              </a>
            </li>
            <li>
              <a
                href="/"
                class="inline-block text-text hover:text-white hover:bg-orange px-[1rem] py-[0.5rem] rounded-full font-bold border-[0.1875rem] border-beige hover:border-orange hover:transition-all duration-300"
              >
                Join Community
              </a>
            </li>
          </ul>
        </nav>
      </div>

      <!-- Menu -->
      <nav class="mt-[0.5625rem] text-center">
        <ul class="flex items-center justify-between">
          {
            menu.map((item) => (
              <li
                class={`shrink w-[9.5625rem]  text-text rounded-full  ${pathname == item.link ? "text-white bg-green" : "hover:text-white  hover:bg-green3 hover:transition-all duration-300"}`}
              >
                {pathname == item.link ? (
                  <span class="py-[0.9375rem] block text-[1.25]">
                    {item.name}
                  </span>
                ) : (
                  <a href={item.link} class="py-[0.9375rem] block text-[1.25]">
                    {item.name}
                  </a>
                )}
              </li>
            ))
          }
        </ul>
      </nav>
    </div>
  </div>

  <style is:global>
    .belt {
      overflow: hidden;
      position: relative;
      white-space: nowrap;
    }

    .belt span {
      display: inline-block;
      padding-left: 100%;
      animation: belt 30s linear infinite;
    }

    @keyframes belt {
      from {
        transform: translateX(0);
      }
      to {
        transform: translateX(-100%);
      }
    }
  </style>
  <script is:inline>
    const header = document.getElementById("header");
    let lastScrollTop = 0;

    window.addEventListener("scroll", () => {
      let scrollTop = window.scrollY || document.documentElement.scrollTop;

      if (scrollTop > lastScrollTop && scrollTop > 0) {
        header.style.top = "0";
        header.style.transition = "top 0.3s ease-in-out";
      } else if (scrollTop <= 0) {
        header.style.top = "4.5rem";
        header.style.transition = "top 0.3s ease-in-out";
      }

      lastScrollTop = scrollTop;
    });
  </script>
</div>
